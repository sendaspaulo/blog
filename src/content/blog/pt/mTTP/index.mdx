---
title: "Mirrored Traveling Tournament Problem (mTTP) ‚Äì Otimiza√ß√£o do Calend√°rio do Brasileir√£o"
description: "Gera√ß√£o de tabelas espelhadas que minimizam dist√¢ncias percorridas, respeitando restri√ß√µes competitivas"
date: 2025-05-05
cover: "mttp_cover.jpg"   # troque por um print do heat-map de dist√¢ncias ou diagrama do SA
tags:
  - Python
  - Optimization
  - Operations Research
  - Sports Analytics
  - Simulated Annealing
---

> Implementa√ß√£o em **Python** de um solucionador heur√≠stico para o *Mirrored Traveling Tournament Problem* aplicado ao Campeonato Brasileiro S√©rie A 2018. Reposit√≥rio completo: [mTTP](https://github.com/sendaspaulo/mTTP).

## üéØ Objetivo

Construir um calend√°rio de 38 rodadas em formato espelhado (turno 1 ‚Üî turno 2) que:

* minimiza a soma das dist√¢ncias de viagem dos 20 clubes;
* limita a **m√°x. 2** jogos consecutivos em casa ou fora;
* mant√©m uma √∫nica partida por time em cada rodada;
* n√£o repete confrontos em rodadas adjacentes.

## üîÑ Pipeline

1. **Dados de Entrada**  
   `CBF_2018.csv` cont√©m a tabela oficial com mandos e datas, al√©m de coordenadas dos est√°dios (usadas na matriz de dist√¢ncias).

2. **Gerador Inicial**  
   `mTTP.py` cria um *round-robin* (turno 1) por algoritmo de c√≠rculo, espelha para o 2¬∫ turno e embaralha mandos mantendo restri√ß√µes b√°sicas.

3. **Simulated Annealing**  
   * Vizinho = troca de mandos ou permuta de rodadas.  
   * Custo = Dist√¢ncia total + Œª¬∑Viola√ß√µes.  
   * Resfriamento geom√©trico `T ‚Üê Œ±¬∑T` at√© `Tmin`, gravando melhor solu√ß√£o fact√≠vel.

4. **P√≥s-processamento**  
   Solu√ß√£o final salva em `calendar_otimizado_max2.csv`.

5. **Compara√ß√£o**  
   `comparador_calendarios.py` gera relat√≥rio (‚àÜ km por time, histograma de sequ√™ncias home/away) contrastando o calend√°rio otimizado e o oficial da CBF.

## üìä Resultados

| M√©trica | Calend√°rio CBF | Calend√°rio mTTP | Redu√ß√£o |
|---------|----------------|-----------------|---------|
| Dist√¢ncia total (km) | 709 054 | **543 779** | **-23,3 %** |
| M√©dia por time (km) | 35 453 | **27 189** | -8 264 |
| M√°x. consecutivos casa/fora | 3 | **2** | ‚Äì |

*Redu√ß√£o de ~165 000 km sem quebrar restri√ß√µes de competitividade.*

## üöÄ Como Rodar

```bash
git clone https://github.com/sendaspaulo/mTTP.git
cd mTTP
python -m venv .venv && source .venv/bin/activate
pip install -r requirements.txt         # pandas, numpy, tqdm...

# gerar calend√°rio otimizado
python mTTP.py --seed 42 --iter 50000 --alpha 0.95 --lambda 500

# comparar com a tabela oficial
python comparador_calendarios.py CBF_2018.csv calendar_otimizado_max2.csv
